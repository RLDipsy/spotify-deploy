"use strict";(self.webpackChunkreact_modele=self.webpackChunkreact_modele||[]).push([[179],{1791:(t,e,r)=>{var n=r(3935),a=r(8767),s=r(4890),i=(r(2222),r(9070),r(7941),r(2526),r(7327),r(1539),r(5003),r(9554),r(4747),r(9337),r(3321),"CHANGE_OFFSET"),l="ADD_LIST_USER_PLAYLISTS",o="SET_CURRENT_PLAYLIST_ID",c="SET_CURRENT_PLAYLIST_DATA";function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={offset:0,listUserPlaylists:[],currentPlaylistId:[],currentPlaylistData:[]};const h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case i:return d(d({},t),{},{offset:e.value});case l:return d(d({},t),{},{listUserPlaylists:t.listUserPlaylists.concat(e.value)});case o:return d(d({},t),{},{currentPlaylistId:e.value});case c:return d(d({},t),{},{currentPlaylistData:e.value});default:return t}};const p=(0,s.MT)(h);r(4916),r(3123),r(9826),r(2749),r(5306),r(9753),r(1817),r(2165),r(6992),r(8783),r(3948),r(7042),r(8309),r(1038);var y=r(7294),v=(r(9669),r(5893));const j=function(){var t=function(t){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}(16);return(0,v.jsxs)("div",{className:"login",children:[(0,v.jsx)("h1",{children:"Spotify Gestion"}),(0,v.jsx)("h2",{children:"GÃ©rer vos playlists"}),(0,v.jsx)("a",{className:"login-button",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("86639255d8834c2ebb9939052213659f","&redirect_uri=").concat("http://localhost:8080/callback","&response_type=").concat("token","&show_dialog=").concat(!0,"&scope=").concat("user-read-playback-state user-modify-playback-state user-read-private user-read-email playlist-modify-private playlist-modify-public user-follow-modify user-follow-read user-library-modify user-library-read streaming","&state=").concat(t),children:"Login"})]})};const g=function(t){var e=t.setToken;return(0,v.jsx)("div",{className:"logout",children:(0,v.jsx)("button",{onClick:function(){e(""),window.localStorage.removeItem("token")},children:"Logout"})})};r(1249);const x=function(t){var e=t.name,r=t.image;return(0,v.jsxs)("li",{className:"playlist",children:[(0,v.jsx)("img",{className:"playlist-image",src:r,alt:"playlist"}),(0,v.jsx)("p",{className:"playlist-name",children:e})]})};var b=r(9669).default;var k=r(9704),w=r(9342);const N=function(){return(0,v.jsx)("div",{className:"loader"})};const P=function(){var t=(0,k.I0)(),e=window.localStorage.getItem("token"),r=(0,k.v9)((function(t){return t.offset})),n=(0,k.v9)((function(t){return t.listUserPlaylists})),s=["playlists",r],c=(0,a.useQuery)(s,(function(){return function(t,e){return b.get("https://api.spotify.com/v1/me/playlists?offset="+e,{headers:{Authorization:"Bearer "+t}})}(e,r)}),{refetchOnWindowFocus:!1}),u=c.isLoading,d=c.data,f=(c.error,c.refetch,d||!1),m=!1;if(f){var h=f.data.items;if(r<f.data.total){var p=[];h.map((function(t){"loris.beranger1"===t.owner.id&&p.push(t)}));var y={type:i,value:r+20};t(y);var j=function(t){return{type:l,value:t}}(p);t(j)}else m=!0}return(0,v.jsxs)("ul",{className:"list-playlists",children:[m&&n.map((function(e){return(0,v.jsx)(w.rU,{to:"/listTracks",className:"linkPlaylist",onClick:function(r){var n=function(t){return{type:o,value:t}}(e.id);t(n)},children:(0,v.jsx)(x,{name:e.name,image:e.images[0].url},e.id)})})),u&&(0,v.jsx)(N,{})]})};const O=function(t){var e=t.setToken;return(0,v.jsxs)("div",{className:"header",children:[(0,v.jsx)("h1",{children:"header"}),(0,v.jsx)(g,{setToken:e})]})};const S=function(){return(0,v.jsx)("div",{className:"player",children:(0,v.jsx)("h1",{children:"Player"})})};var I=r(7898);const A=function(t){var e=t.name,r=t.image,n=t.artistsList,a=t.album,s="",i=1;return n.map((function(t){s+=t.name,n.length>1&&n.length!=i&&(s+=", "),i++})),(0,v.jsxs)("li",{className:"track",children:[(0,v.jsxs)("div",{className:"box-img-title",children:[(0,v.jsx)("img",{className:"track-image",src:r,alt:"track"}),(0,v.jsxs)("div",{className:"box-track-info",children:[(0,v.jsx)("span",{className:"track-name",children:e}),(0,v.jsx)("span",{className:"track-artist",children:s})]})]}),(0,v.jsx)("span",{className:"album-name",children:a}),(0,v.jsxs)("div",{className:"box-like-time",children:[(0,v.jsx)("i",{className:"heart outline icon"}),(0,v.jsx)("span",{className:"track-duration",children:"1:20"})]})]})};const T=function(){var t=(0,k.I0)(),e=window.localStorage.getItem("token"),r=(0,k.v9)((function(t){return t.currentPlaylistId}));console.log(r);var n=(0,k.v9)((function(t){return t.currentPlaylistData}));console.log(n);var s=["tracks",r],i=(0,a.useQuery)(s,(function(){return function(t,e){return b.get("https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),{headers:{Authorization:"Bearer "+t}})}(e,r)}),{refetchOnWindowFocus:!1}),l=i.isLoading,o=i.data,u=(i.error,i.refetch,o||!1);if(console.log(u),u){var d=u.data.items;t({type:c,value:d})}return(0,v.jsxs)("ul",{className:"list-tracks",children:[!l&&n.map((function(t){return(0,v.jsx)(A,{name:t.track.name,image:t.track.album.images[0].url,artistsList:t.track.artists,album:t.track.album.name},t.track.id)})),l&&(0,v.jsx)(N,{})]})};function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,a,s=[],i=!0,l=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(s.push(n.value),!e||s.length!==e);i=!0);}catch(t){l=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return s}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const E=function(){var t=_((0,y.useState)(""),2),e=t[0],r=t[1];return(0,y.useEffect)((function(){var t=window.location.hash,e=window.localStorage.getItem("token");!e&&t&&(e=t.substring(1).split("&").find((function(t){return t.startsWith("access_token")})).split("=")[1],window.location.hash="",window.localStorage.setItem("token",e),window.location.replace("http://localhost:8080/listPlaylists")),r(e)}),[]),(0,v.jsxs)("div",{className:"app",children:[!e&&(0,v.jsx)(j,{}),e&&(0,v.jsxs)("div",{className:"gestion-app",children:[(0,v.jsx)(O,{setToken:r}),(0,v.jsxs)(I.Z5,{children:[(0,v.jsx)(I.AW,{path:"/listPlaylists",element:(0,v.jsx)(P,{})}),(0,v.jsx)(I.AW,{path:"/listTracks",element:(0,v.jsx)(T,{})})]}),(0,v.jsx)(S,{})]})]})};var D=new a.QueryClient,C=document.getElementById("root");(0,n.render)((0,v.jsx)(w.VK,{children:(0,v.jsx)(k.zt,{store:p,children:(0,v.jsx)(a.QueryClientProvider,{client:D,children:(0,v.jsx)(E,{})})})}),C)},9193:()=>{}},t=>{var e=e=>t(t.s=e);t.O(0,[522],(()=>(e(9193),e(1791))));t.O()}]);